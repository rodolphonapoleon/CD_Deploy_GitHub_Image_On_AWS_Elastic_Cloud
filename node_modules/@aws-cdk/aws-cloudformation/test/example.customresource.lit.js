"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lambda = require("@aws-cdk/aws-lambda");
const core_1 = require("@aws-cdk/core");
const lib_1 = require("../lib");
class CopyOperation extends core_1.Construct {
    constructor(parent, name, props) {
        super(parent, name);
        const lambdaProvider = new lambda.SingletonFunction(this, 'Provider', {
            uuid: 'f7d4f730-4ee1-11e8-9c2d-fa7ae01bbebc',
            runtime: lambda.Runtime.PYTHON_3_7,
            code: lambda.Code.asset('../copy-handler'),
            handler: 'index.handler',
            timeout: core_1.Duration.seconds(60),
        });
        new lib_1.CustomResource(this, 'Resource', {
            provider: lib_1.CustomResourceProvider.lambda(lambdaProvider),
            properties: {
                sourceBucketArn: props.sourceBucket.bucketArn,
                targetBucketArn: props.targetBucket.bucketArn,
            }
        });
    }
}
/// !hide
new CopyOperation(new core_1.Stack(), 'Test', {
    sourceBucket: { bucketArn: 'x' },
    targetBucket: { bucketArn: 'y' },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhhbXBsZS5jdXN0b21yZXNvdXJjZS5saXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJleGFtcGxlLmN1c3RvbXJlc291cmNlLmxpdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhDQUErQztBQUMvQyx3Q0FBMkQ7QUFDM0QsZ0NBQWdFO0FBWWhFLE1BQU0sYUFBYyxTQUFRLGdCQUFTO0lBQ25DLFlBQVksTUFBaUIsRUFBRSxJQUFZLEVBQUUsS0FBeUI7UUFDcEUsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUVwQixNQUFNLGNBQWMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ3BFLElBQUksRUFBRSxzQ0FBc0M7WUFDNUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVTtZQUNsQyxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUM7WUFDMUMsT0FBTyxFQUFFLGVBQWU7WUFDeEIsT0FBTyxFQUFFLGVBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1NBQzlCLENBQUMsQ0FBQztRQUVILElBQUksb0JBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ25DLFFBQVEsRUFBRSw0QkFBc0IsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDO1lBQ3ZELFVBQVUsRUFBRTtnQkFDVixlQUFlLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTO2dCQUM3QyxlQUFlLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTO2FBQzlDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBQ0QsU0FBUztBQUVULElBQUksYUFBYSxDQUFDLElBQUksWUFBSyxFQUFFLEVBQUUsTUFBTSxFQUFFO0lBQ3JDLFlBQVksRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDaEMsWUFBWSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtDQUNqQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbGFtYmRhID0gcmVxdWlyZSgnQGF3cy1jZGsvYXdzLWxhbWJkYScpO1xuaW1wb3J0IHsgQ29uc3RydWN0LCBEdXJhdGlvbiwgU3RhY2sgfSBmcm9tICdAYXdzLWNkay9jb3JlJztcbmltcG9ydCB7IEN1c3RvbVJlc291cmNlLCBDdXN0b21SZXNvdXJjZVByb3ZpZGVyIH0gZnJvbSAnLi4vbGliJztcblxuaW50ZXJmYWNlIElCdWNrZXQge1xuICByZWFkb25seSBidWNrZXRBcm46IHN0cmluZztcbn1cblxuLy8vICFzaG93XG5pbnRlcmZhY2UgQ29weU9wZXJhdGlvblByb3BzIHtcbiAgc291cmNlQnVja2V0OiBJQnVja2V0O1xuICB0YXJnZXRCdWNrZXQ6IElCdWNrZXQ7XG59XG5cbmNsYXNzIENvcHlPcGVyYXRpb24gZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbnN0cnVjdCwgbmFtZTogc3RyaW5nLCBwcm9wczogQ29weU9wZXJhdGlvblByb3BzKSB7XG4gICAgc3VwZXIocGFyZW50LCBuYW1lKTtcblxuICAgIGNvbnN0IGxhbWJkYVByb3ZpZGVyID0gbmV3IGxhbWJkYS5TaW5nbGV0b25GdW5jdGlvbih0aGlzLCAnUHJvdmlkZXInLCB7XG4gICAgICB1dWlkOiAnZjdkNGY3MzAtNGVlMS0xMWU4LTljMmQtZmE3YWUwMWJiZWJjJyxcbiAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLlBZVEhPTl8zXzcsXG4gICAgICBjb2RlOiBsYW1iZGEuQ29kZS5hc3NldCgnLi4vY29weS1oYW5kbGVyJyksXG4gICAgICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXG4gICAgICB0aW1lb3V0OiBEdXJhdGlvbi5zZWNvbmRzKDYwKSxcbiAgICB9KTtcblxuICAgIG5ldyBDdXN0b21SZXNvdXJjZSh0aGlzLCAnUmVzb3VyY2UnLCB7XG4gICAgICBwcm92aWRlcjogQ3VzdG9tUmVzb3VyY2VQcm92aWRlci5sYW1iZGEobGFtYmRhUHJvdmlkZXIpLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzb3VyY2VCdWNrZXRBcm46IHByb3BzLnNvdXJjZUJ1Y2tldC5idWNrZXRBcm4sXG4gICAgICAgIHRhcmdldEJ1Y2tldEFybjogcHJvcHMudGFyZ2V0QnVja2V0LmJ1Y2tldEFybixcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuLy8vICFoaWRlXG5cbm5ldyBDb3B5T3BlcmF0aW9uKG5ldyBTdGFjaygpLCAnVGVzdCcsIHtcbiAgc291cmNlQnVja2V0OiB7IGJ1Y2tldEFybjogJ3gnIH0sXG4gIHRhcmdldEJ1Y2tldDogeyBidWNrZXRBcm46ICd5JyB9LFxufSk7Il19